{"ast":null,"code":"import _slicedToArray from\"E:/ENCRPYTIX/PROJECT-MANAGMENT-TOOL/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Fragment,useEffect,useState}from\"react\";import{Dialog,Transition}from\"@headlessui/react\";import BtnPrimary from\"./BtnPrimary\";import BtnSecondary from\"./BtnSecondary\";import axios from\"axios\";import toast from\"react-hot-toast\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddTaskModal=function AddTaskModal(_ref){var isAddTaskModalOpen=_ref.isAddTaskModalOpen,setAddTaskModal=_ref.setAddTaskModal,_ref$projectId=_ref.projectId,projectId=_ref$projectId===void 0?null:_ref$projectId,_ref$taskId=_ref.taskId,taskId=_ref$taskId===void 0?null:_ref$taskId,_ref$edit=_ref.edit,edit=_ref$edit===void 0?false:_ref$edit,refreshData=_ref.refreshData;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),desc=_useState4[0],setDesc=_useState4[1];useEffect(function(){if(edit&&isAddTaskModalOpen){axios.get(\"http://localhost:9000/project/\".concat(projectId,\"/task/\").concat(taskId)).then(function(res){setTitle(res.data[0].task[0].title);setDesc(res.data[0].task[0].description);}).catch(function(error){toast.error(\"Something went wrong\");});}},[edit,isAddTaskModalOpen,projectId,taskId]);var handleSubmit=function handleSubmit(e){e.preventDefault();if(!edit){axios.post(\"http://localhost:9000/project/\".concat(projectId,\"/task\"),{title:title,description:desc}).then(function(res){setAddTaskModal(false);toast.success(\"Task created successfully\");setTitle(\"\");setDesc(\"\");}).catch(function(error){if(error.response.status===422){toast.error(error.response.data.details[0].message);}else{toast.error(\"Something went wrong\");}});}else{axios.put(\"http://localhost:9000/project/\".concat(projectId,\"/task/\").concat(taskId),{title:title,description:desc}).then(function(res){setAddTaskModal(false);toast.success(\"Task is updated\");refreshData(true);setTitle(\"\");setDesc(\"\");}).catch(function(error){if(error.response.status===422){toast.error(error.response.data.details[0].message);}else{toast.error(\"Something went wrong\");}});}};return/*#__PURE__*/_jsx(Transition,{appear:true,show:isAddTaskModalOpen,as:Fragment,children:/*#__PURE__*/_jsx(Dialog,{as:\"div\",open:isAddTaskModalOpen,onClose:function onClose(){return setAddTaskModal(false);},className:\"relative z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 overflow-y-auto\",children:[/*#__PURE__*/_jsx(Transition.Child,{as:Fragment,enter:\"ease-out duration-300\",enterFrom:\"opacity-0\",enterTo:\"opacity-100\",leave:\"ease-in duration-200\",leaveFrom:\"opacity-100\",leaveTo:\"opacity-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/30\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 flex items-center justify-center p-4 w-screen h-screen\",children:/*#__PURE__*/_jsx(Transition.Child,{as:Fragment,enter:\"ease-out duration-300\",enterFrom:\"opacity-0 scale-95\",enterTo:\"opacity-100 scale-100\",leave:\"ease-in duration-200\",leaveFrom:\"opacity-100 scale-100\",leaveTo:\"opacity-0 scale-95\",children:/*#__PURE__*/_jsxs(Dialog.Panel,{className:\"rounded-md bg-white w-6/12\",children:[/*#__PURE__*/_jsxs(Dialog.Title,{as:\"div\",className:\"bg-white shadow px-6 py-4 rounded-t-md sticky top-0\",children:[!edit?/*#__PURE__*/_jsx(\"h1\",{children:\"Add Task\"}):/*#__PURE__*/_jsx(\"h1\",{children:\"Edit Task\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setAddTaskModal(false);},className:\"absolute right-6 top-4 text-gray-500 hover:bg-gray-100 rounded focus:outline-none focus:ring focus:ring-offset-1 focus:ring-indigo-200 \",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 24 24\",fill:\"currentColor\",className:\"w-6 h-6\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z\",clipRule:\"evenodd\"})})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"gap-4 px-8 py-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",className:\"block text-gray-600\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{value:title,onChange:function onChange(e){return setTitle(e.target.value);},type:\"text\",className:\"border border-gray-300 rounded-md w-full text-sm py-2 px-2.5 focus:border-indigo-500 focus:outline-offset-1 focus:outline-indigo-400\",placeholder:\"Task title\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Description\",className:\"block text-gray-600\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:desc,onChange:function onChange(e){return setDesc(e.target.value);},className:\"border border-gray-300 rounded-md w-full text-sm py-2 px-2.5 focus:border-indigo-500 focus:outline-offset-1 focus:outline-indigo-400\",rows:\"6\",placeholder:\"Task description\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end items-center space-x-2\",children:[/*#__PURE__*/_jsx(BtnSecondary,{onClick:function onClick(){return setAddTaskModal(false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(BtnPrimary,{children:\"Save\"})]})]})]})})})]})})});};export default AddTaskModal;","map":{"version":3,"names":["React","Fragment","useEffect","useState","Dialog","Transition","BtnPrimary","BtnSecondary","axios","toast","AddTaskModal","isAddTaskModalOpen","setAddTaskModal","projectId","taskId","edit","refreshData","title","setTitle","desc","setDesc","get","then","res","data","task","description","catch","error","handleSubmit","e","preventDefault","post","success","response","status","details","message","put","target","value"],"sources":["E:/ENCRPYTIX/PROJECT-MANAGMENT-TOOL/client/src/components/AddTaskModal.js"],"sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { Dialog, Transition } from \"@headlessui/react\";\r\nimport BtnPrimary from \"./BtnPrimary\";\r\nimport BtnSecondary from \"./BtnSecondary\";\r\nimport axios from \"axios\";\r\nimport toast from \"react-hot-toast\";\r\n\r\nconst AddTaskModal = ({\r\n  isAddTaskModalOpen,\r\n  setAddTaskModal,\r\n  projectId = null,\r\n  taskId = null,\r\n  edit = false,\r\n  refreshData,\r\n}) => {\r\n  const [title, setTitle] = useState(\"\");\r\n  const [desc, setDesc] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (edit && isAddTaskModalOpen) {\r\n      axios\r\n        .get(`http://localhost:9000/project/${projectId}/task/${taskId}`)\r\n        .then((res) => {\r\n          setTitle(res.data[0].task[0].title);\r\n          setDesc(res.data[0].task[0].description);\r\n        })\r\n        .catch((error) => {\r\n          toast.error(\"Something went wrong\");\r\n        });\r\n    }\r\n  }, [edit, isAddTaskModalOpen, projectId, taskId]);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!edit) {\r\n      axios\r\n        .post(`http://localhost:9000/project/${projectId}/task`, {\r\n          title,\r\n          description: desc,\r\n        })\r\n        .then((res) => {\r\n          setAddTaskModal(false);\r\n          toast.success(\"Task created successfully\");\r\n          setTitle(\"\");\r\n          setDesc(\"\");\r\n        })\r\n        .catch((error) => {\r\n          if (error.response.status === 422) {\r\n            toast.error(error.response.data.details[0].message);\r\n          } else {\r\n            toast.error(\"Something went wrong\");\r\n          }\r\n        });\r\n    } else {\r\n      axios\r\n        .put(`http://localhost:9000/project/${projectId}/task/${taskId}`, {\r\n          title,\r\n          description: desc,\r\n        })\r\n        .then((res) => {\r\n          setAddTaskModal(false);\r\n          toast.success(\"Task is updated\");\r\n          refreshData(true);\r\n          setTitle(\"\");\r\n          setDesc(\"\");\r\n        })\r\n        .catch((error) => {\r\n          if (error.response.status === 422) {\r\n            toast.error(error.response.data.details[0].message);\r\n          } else {\r\n            toast.error(\"Something went wrong\");\r\n          }\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Transition appear show={isAddTaskModalOpen} as={Fragment}>\r\n      <Dialog\r\n        as='div'\r\n        open={isAddTaskModalOpen}\r\n        onClose={() => setAddTaskModal(false)}\r\n        className='relative z-50'\r\n      >\r\n        <div className='fixed inset-0 overflow-y-auto'>\r\n          <Transition.Child\r\n            as={Fragment}\r\n            enter='ease-out duration-300'\r\n            enterFrom='opacity-0'\r\n            enterTo='opacity-100'\r\n            leave='ease-in duration-200'\r\n            leaveFrom='opacity-100'\r\n            leaveTo='opacity-0'\r\n          >\r\n            <div className='fixed inset-0 bg-black/30' />\r\n          </Transition.Child>\r\n          <div className='fixed inset-0 flex items-center justify-center p-4 w-screen h-screen'>\r\n            <Transition.Child\r\n              as={Fragment}\r\n              enter='ease-out duration-300'\r\n              enterFrom='opacity-0 scale-95'\r\n              enterTo='opacity-100 scale-100'\r\n              leave='ease-in duration-200'\r\n              leaveFrom='opacity-100 scale-100'\r\n              leaveTo='opacity-0 scale-95'\r\n            >\r\n              <Dialog.Panel className='rounded-md bg-white w-6/12'>\r\n                <Dialog.Title\r\n                  as='div'\r\n                  className={\r\n                    \"bg-white shadow px-6 py-4 rounded-t-md sticky top-0\"\r\n                  }\r\n                >\r\n                  {!edit ? <h1>Add Task</h1> : <h1>Edit Task</h1>}\r\n                  <button\r\n                    onClick={() => setAddTaskModal(false)}\r\n                    className='absolute right-6 top-4 text-gray-500 hover:bg-gray-100 rounded focus:outline-none focus:ring focus:ring-offset-1 focus:ring-indigo-200 '\r\n                  >\r\n                    <svg\r\n                      xmlns='http://www.w3.org/2000/svg'\r\n                      viewBox='0 0 24 24'\r\n                      fill='currentColor'\r\n                      className='w-6 h-6'\r\n                    >\r\n                      <path\r\n                        fillRule='evenodd'\r\n                        d='M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z'\r\n                        clipRule='evenodd'\r\n                      />\r\n                    </svg>\r\n                  </button>\r\n                </Dialog.Title>\r\n                <form onSubmit={handleSubmit} className='gap-4 px-8 py-4'>\r\n                  <div className='mb-3'>\r\n                    <label htmlFor='title' className='block text-gray-600'>\r\n                      Title\r\n                    </label>\r\n                    <input\r\n                      value={title}\r\n                      onChange={(e) => setTitle(e.target.value)}\r\n                      type='text'\r\n                      className='border border-gray-300 rounded-md w-full text-sm py-2 px-2.5 focus:border-indigo-500 focus:outline-offset-1 focus:outline-indigo-400'\r\n                      placeholder='Task title'\r\n                    />\r\n                  </div>\r\n                  <div className='mb-2'>\r\n                    <label\r\n                      htmlFor='Description'\r\n                      className='block text-gray-600'\r\n                    >\r\n                      Description\r\n                    </label>\r\n                    <textarea\r\n                      value={desc}\r\n                      onChange={(e) => setDesc(e.target.value)}\r\n                      className='border border-gray-300 rounded-md w-full text-sm py-2 px-2.5 focus:border-indigo-500 focus:outline-offset-1 focus:outline-indigo-400'\r\n                      rows='6'\r\n                      placeholder='Task description'\r\n                    ></textarea>\r\n                  </div>\r\n                  <div className='flex justify-end items-center space-x-2'>\r\n                    <BtnSecondary onClick={() => setAddTaskModal(false)}>\r\n                      Cancel\r\n                    </BtnSecondary>\r\n                    <BtnPrimary>Save</BtnPrimary>\r\n                  </div>\r\n                </form>\r\n              </Dialog.Panel>\r\n            </Transition.Child>\r\n          </div>\r\n        </div>\r\n      </Dialog>\r\n    </Transition>\r\n  );\r\n};\r\n\r\nexport default AddTaskModal;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}