{"ast":null,"code":"import _slicedToArray from\"E:/ENCRPYTIX/PROJECT-MANAGMENT-TOOL/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useCallback}from\"react\";import axios from\"axios\";import toast from\"react-hot-toast\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Navbar=function Navbar(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),projects=_useState2[0],setProjects=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),refresh=_useState4[0],setRefresh=_useState4[1];// Fetch projects when component mounts or refresh is triggered\nuseEffect(function(){fetchProjects();},[refresh]);// Fetch projects from API\nvar fetchProjects=function fetchProjects(){axios.get(\"http://localhost:9000/projects\").then(function(res){setProjects(res.data);setRefresh(false);// Reset refresh state after fetching projects\n}).catch(function(error){toast.error(\"Failed to fetch projects\");});};// Handle project added event\nvar handleProjectAdded=useCallback(function(){setRefresh(true);// Trigger refresh when a new project is added\n},[]);// Handle project deleted event\nvar handleProjectDeleted=useCallback(function(){setRefresh(true);// Trigger refresh when a project is deleted\n},[]);// Set up event listeners for project events\nuseEffect(function(){document.addEventListener(\"projectAdded\",handleProjectAdded);document.addEventListener(\"projectDeleted\",handleProjectDeleted);return function(){document.removeEventListener(\"projectAdded\",handleProjectAdded);document.removeEventListener(\"projectDeleted\",handleProjectDeleted);};},[handleProjectAdded,handleProjectDeleted]);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow h-14 flex items-center justify-between px-4\",children:[/*#__PURE__*/_jsx(\"ul\",{className:\"flex space-x-4\",children:projects.map(function(project){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#\".concat(project.title),className:\"text-gray-600 cursor-not-allowed\",tabIndex:\"-1\",children:project.title})},project._id);})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto flex items-center\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"bg-blue-500 text-white px-3 py-1 rounded-full\",children:[projects.length,\" Projects\"]})})]});};export default Navbar;","map":{"version":3,"names":["React","useEffect","useState","useCallback","axios","toast","Navbar","projects","setProjects","refresh","setRefresh","fetchProjects","get","then","res","data","catch","error","handleProjectAdded","handleProjectDeleted","document","addEventListener","removeEventListener","map","project","title","_id","length"],"sources":["E:/ENCRPYTIX/PROJECT-MANAGMENT-TOOL/client/src/components/Navbar.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\r\nimport axios from \"axios\";\r\nimport toast from \"react-hot-toast\";\r\n\r\nconst Navbar = () => {\r\n  const [projects, setProjects] = useState([]);\r\n  const [refresh, setRefresh] = useState(false);\r\n\r\n  // Fetch projects when component mounts or refresh is triggered\r\n  useEffect(() => {\r\n    fetchProjects();\r\n  }, [refresh]);\r\n\r\n  // Fetch projects from API\r\n  const fetchProjects = () => {\r\n    axios\r\n      .get(\"http://localhost:9000/projects\")\r\n      .then((res) => {\r\n        setProjects(res.data);\r\n        setRefresh(false); // Reset refresh state after fetching projects\r\n      })\r\n      .catch((error) => {\r\n        toast.error(\"Failed to fetch projects\");\r\n      });\r\n  };\r\n\r\n  // Handle project added event\r\n  const handleProjectAdded = useCallback(() => {\r\n    setRefresh(true); // Trigger refresh when a new project is added\r\n  }, []);\r\n\r\n  // Handle project deleted event\r\n  const handleProjectDeleted = useCallback(() => {\r\n    setRefresh(true); // Trigger refresh when a project is deleted\r\n  }, []);\r\n\r\n  // Set up event listeners for project events\r\n  useEffect(() => {\r\n    document.addEventListener(\"projectAdded\", handleProjectAdded);\r\n    document.addEventListener(\"projectDeleted\", handleProjectDeleted);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"projectAdded\", handleProjectAdded);\r\n      document.removeEventListener(\"projectDeleted\", handleProjectDeleted);\r\n    };\r\n  }, [handleProjectAdded, handleProjectDeleted]);\r\n\r\n  return (\r\n    <div className='bg-white shadow h-14 flex items-center justify-between px-4'>\r\n      <ul className='flex space-x-4'>\r\n        {projects.map((project) => (\r\n          <li key={project._id}>\r\n            <a\r\n              href={`#${project.title}`}\r\n              className='text-gray-600 cursor-not-allowed'\r\n              tabIndex='-1'\r\n            >\r\n              {project.title}\r\n            </a>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      <div className='ml-auto flex items-center'>\r\n        <span className='bg-blue-500 text-white px-3 py-1 rounded-full'>\r\n          {projects.length} Projects\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n"],"mappings":"gIAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,CAAqCC,WAArC,KAAwD,OAAxD,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAOC,MAAP,KAAkB,iBAAlB,C,wFAEA,GAAMC,OAAM,CAAG,QAATA,OAAS,EAAM,CACnB,cAAgCJ,QAAQ,CAAC,EAAD,CAAxC,wCAAOK,QAAP,eAAiBC,WAAjB,eACA,eAA8BN,QAAQ,CAAC,KAAD,CAAtC,yCAAOO,OAAP,eAAgBC,UAAhB,eAEA;AACAT,SAAS,CAAC,UAAM,CACdU,aAAa,GACd,CAFQ,CAEN,CAACF,OAAD,CAFM,CAAT,CAIA;AACA,GAAME,cAAa,CAAG,QAAhBA,cAAgB,EAAM,CAC1BP,KAAK,CACFQ,GADH,CACO,gCADP,EAEGC,IAFH,CAEQ,SAACC,GAAD,CAAS,CACbN,WAAW,CAACM,GAAG,CAACC,IAAL,CAAX,CACAL,UAAU,CAAC,KAAD,CAAV,CAAmB;AACpB,CALH,EAMGM,KANH,CAMS,SAACC,KAAD,CAAW,CAChBZ,KAAK,CAACY,KAAN,CAAY,0BAAZ,EACD,CARH,EASD,CAVD,CAYA;AACA,GAAMC,mBAAkB,CAAGf,WAAW,CAAC,UAAM,CAC3CO,UAAU,CAAC,IAAD,CAAV,CAAkB;AACnB,CAFqC,CAEnC,EAFmC,CAAtC,CAIA;AACA,GAAMS,qBAAoB,CAAGhB,WAAW,CAAC,UAAM,CAC7CO,UAAU,CAAC,IAAD,CAAV,CAAkB;AACnB,CAFuC,CAErC,EAFqC,CAAxC,CAIA;AACAT,SAAS,CAAC,UAAM,CACdmB,QAAQ,CAACC,gBAAT,CAA0B,cAA1B,CAA0CH,kBAA1C,EACAE,QAAQ,CAACC,gBAAT,CAA0B,gBAA1B,CAA4CF,oBAA5C,EAEA,MAAO,WAAM,CACXC,QAAQ,CAACE,mBAAT,CAA6B,cAA7B,CAA6CJ,kBAA7C,EACAE,QAAQ,CAACE,mBAAT,CAA6B,gBAA7B,CAA+CH,oBAA/C,EACD,CAHD,CAID,CARQ,CAQN,CAACD,kBAAD,CAAqBC,oBAArB,CARM,CAAT,CAUA,mBACE,aAAK,SAAS,CAAC,6DAAf,wBACE,WAAI,SAAS,CAAC,gBAAd,UACGZ,QAAQ,CAACgB,GAAT,CAAa,SAACC,OAAD,qBACZ,iCACE,UACE,IAAI,YAAMA,OAAO,CAACC,KAAd,CADN,CAEE,SAAS,CAAC,kCAFZ,CAGE,QAAQ,CAAC,IAHX,UAKGD,OAAO,CAACC,KALX,EADF,EAASD,OAAO,CAACE,GAAjB,CADY,EAAb,CADH,EADF,cAcE,YAAK,SAAS,CAAC,2BAAf,uBACE,cAAM,SAAS,CAAC,+CAAhB,WACGnB,QAAQ,CAACoB,MADZ,eADF,EAdF,GADF,CAsBD,CAjED,CAmEA,cAAerB,OAAf"},"metadata":{},"sourceType":"module"}